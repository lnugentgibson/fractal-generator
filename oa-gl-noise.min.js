"use strict";var _window=window,angular=_window.angular;angular.module("oaGLSLNoise",["oaWebglHelpers"]).service("oaNoiseShaderFunctions",["oaWebglShaderSnippet","oaWebglFunctionSnippet","oaWebglSnippet",function(a,b,c){var d=new a("standardVertexShader");d.variables.add("a_position","attribute","vec4"),d.variables.apply(),d.mainSnippet=new c("body","gl_Position = a_position;");var e=new b("rand","float","snippet");e.parameters.add("f","float"),e.parameters.apply(),e.bodySnippet=new c("body","return fract(sin(f + u_seed.z) * u_seed.w);");var f=new b("rand","float","snippet");f.parameters.add("f","float"),f.parameters.add("s","vec4"),f.parameters.apply(),f.bodySnippet=new c("body","return fract(sin(f + s.z) * s.w);");var g=new b("rand","float","snippet");g.parameters.add("v","vec2"),g.parameters.apply(),g.bodySnippet=new c("body","return rand(dot(v, u_seed.xy));");var h=new b("rand","float","snippet");h.parameters.add("v","vec2"),h.parameters.add("s","vec4"),h.parameters.apply(),h.bodySnippet=new c("body","return rand(dot(v, s.xy), s);");var i=new b("randGrad","vec2","snippet");i.parameters.add("v","vec2"),i.parameters.apply(),i.bodySnippet=new c("body","float a = 2.0 * 3.14159265358 * rand(dot(v, u_seed.xy));\nreturn vec2(cos(a), sin(a));");var j=new b("randGrad","vec2","snippet");j.parameters.add("v","vec2"),j.parameters.add("s","vec4"),j.parameters.apply(),j.bodySnippet=new c("body","float a = 2.0 * 3.14159265358 * rand(dot(v, s.xy), s);\nreturn vec2(cos(a), sin(a));");var k=new b("mix3","float","snippet");k.parameters.addMultiple([{paramname:"x",datatype:"float"},{paramname:"y",datatype:"float"},{paramname:"a",datatype:"float"}]),k.parameters.apply(),k.bodySnippet=new c("body","float a3 = a * a * (3.0 - 2.0 * a);\nreturn mix(x, y, a3);");var l=new b("mix5","float","snippet");l.parameters.addMultiple([{paramname:"x",datatype:"float"},{paramname:"y",datatype:"float"},{paramname:"a",datatype:"float"}]),l.parameters.apply(),l.bodySnippet=new c("body","float a5 = a * a * a * (6.0 * a * a - 15.0 * a + 10.0);\nreturn mix(x, y, a5);");var m=new b("perlin","float","snippet");m.parameters.add("p","vec2"),m.parameters.apply(),m.bodySnippet=new c("body","vec2 l = floor(p);\nvec2 u = ceil(p);\nvec2 f = fract(p);\nfloat sw = rand(l), se = rand(vec2(u.x, l.y));\nfloat nw = rand(vec2(l.x, u.y)), ne = rand(u);\nfloat n = mix5(nw, ne, f.x), s = mix5(sw, se, f.x);\nreturn mix5(s, n, f.y);");var n=new b("perlinGradient","float","snippet");n.parameters.add("p","vec2"),n.parameters.apply(),n.bodySnippet=new c("body","vec2 l = floor(p);\nvec2 u = ceil(p);\nvec2 f = fract(p);\nvec2 vse = vec2(u.x, l.y), vnw = vec2(l.x, u.y);\nfloat sw = dot(randGrad(l), p - l), se = dot(randGrad(vse), p - vse);\nfloat nw = dot(randGrad(vnw), p - vnw), ne = dot(randGrad(u), p - u);\nfloat n = mix5(nw, ne, f.x), s = mix5(sw, se, f.x);\nreturn mix5(s, n, f.y) * 0.5 + 0.5;");var o=new b("simplex","float","snippet");o.parameters.add("p","vec2"),o.parameters.apply(),o.bodySnippet=new c("body","mat2 t = mat2(1.0, 0.0, 0.5, sqrt(3.0 / 4.0));\nmat2 it = mat2(1.0, 0.0, -sqrt(1.0 / 3.0), 2.0 * sqrt(1.0 / 3.0));\nvec2 op = gl_FragCoord.xy / u_resolution;\nvec2 ip = it * op;\nvec2 il = floor(ip);\nvec2 f = fract(ip);\nvec2 ol = t * il;\nvec2 oc, oc1, oc2, oc3;\noc = ol + vec2(0.75, sqrt(3.0) / 4.0);\noc2 = ol + vec2(1.0, 0.0);\noc3 = ol + vec2(0.5, sqrt(3.0 / 4.0));\n//float y23 = -sqrt(3.0 / 4.0), x32 = -0.5, x13, y13;\nfloat y23 = oc2.y - oc3.y, x32 = oc3.x - oc2.x, x13, y13;\nfloat x03 = op.x - oc3.x, y03 = op.y - oc3.y;\nif(f.x + f.y < 1.0) {\n  oc1 = ol;\n  x13 = -0.5;\n  y13 = -sqrt(3.0 / 4.0);\n}\nelse {\n  oc1 = ol + vec2(1.5, sqrt(3.0 / 4.0));\n  x13 = 1.0;\n  y13 = 0.0;\n}\nx13 = oc1.x - oc3.x;\ny13 = oc1.y - oc3.y;\nvec3 r = vec3(rand(oc1), rand(oc2), rand(oc3));\n//r = vec3(0.0, 0.0, 1.0);\n//vec3 d = vec3(length(op - oc1), length(op - oc2), length(op - oc3));\n//vec3 w = 1.0 / d;\nvec3 w = vec3((y23 * x03 + x32 * y03) / (y23 * x13 + x32 * y13), (-y13 * x03 + x13 * y03) / (y23 * x13 + x32 * y13), 0.0);\nw.z = 1.0 - w.x - w.y;\nvec3 w3 = w * w * (3.0 - 2.0 * w);\nvec3 w5 = w * w * w * (6.0 * w * w - 15.0 * w + 10.0);\nvec3 rv = r * w5;\nreturn (rv.x + rv.y + rv.z) / (w5.x + w5.y + w5.z);");var p=new b("simplexGradient","float","snippet");p.parameters.add("p","vec2"),p.parameters.apply(),p.bodySnippet=new c("body","mat2 t = mat2(1.0, 0.0, 0.5, sqrt(3.0 / 4.0));\nmat2 it = mat2(1.0, 0.0, -sqrt(1.0 / 3.0), 2.0 * sqrt(1.0 / 3.0));\nvec2 ip = it * p;\nvec2 il = floor(ip);\nvec2 f = fract(ip);\nvec2 l = t * il;\nvec2 c, c1, c2, c3;\nc = l + vec2(0.75, sqrt(3.0) / 4.0);\nc2 = l + vec2(1.0, 0.0);\nc3 = l + vec2(0.5, sqrt(3.0 / 4.0));\n//float y23 = -sqrt(3.0 / 4.0), x32 = -0.5, x13, y13;\nfloat y23 = c2.y - c3.y, x32 = c3.x - c2.x, x13, y13;\nfloat x03 = p.x - c3.x, y03 = p.y - c3.y;\nif(f.x + f.y < 1.0) {\n  c1 = l;\n  x13 = -0.5;\n  y13 = -sqrt(3.0 / 4.0);\n}\nelse {\n  c1 = l + vec2(1.5, sqrt(3.0 / 4.0));\n  x13 = 1.0;\n  y13 = 0.0;\n}\nx13 = c1.x - c3.x;\ny13 = c1.y - c3.y;\nvec3 r = vec3(dot(randGrad(c1), p - c1), dot(randGrad(c2), p - c2), dot(randGrad(c3), p - c3));\n//r = vec3(0.0, 0.0, 1.0);\n//vec3 d = vec3(length(op - oc1), length(op - oc2), length(op - oc3));\n//vec3 w = 1.0 / d;\nvec3 w = vec3((y23 * x03 + x32 * y03) / (y23 * x13 + x32 * y13), (-y13 * x03 + x13 * y03) / (y23 * x13 + x32 * y13), 0.0);\nw.z = 1.0 - w.x - w.y;\nvec3 w3 = w * w * (3.0 - 2.0 * w);\nvec3 w5 = w * w * w * (6.0 * w * w - 15.0 * w + 10.0);\nvec3 rv = r * w5;\nreturn (rv.x + rv.y + rv.z) / (w5.x + w5.y + w5.z) * 0.5 + 0.5;");var q=new b("simplexGradient","float","snippet");q.parameters.add("p","vec2"),q.parameters.add("s","vec4"),q.parameters.apply(),q.bodySnippet=new c("body","mat2 t = mat2(1.0, 0.0, 0.5, sqrt(3.0 / 4.0));\nmat2 it = mat2(1.0, 0.0, -sqrt(1.0 / 3.0), 2.0 * sqrt(1.0 / 3.0));\nvec2 ip = it * p;\nvec2 il = floor(ip);\nvec2 f = fract(ip);\nvec2 l = t * il;\nvec2 c, c1, c2, c3;\nc = l + vec2(0.75, sqrt(3.0) / 4.0);\nc2 = l + vec2(1.0, 0.0);\nc3 = l + vec2(0.5, sqrt(3.0 / 4.0));\n//float y23 = -sqrt(3.0 / 4.0), x32 = -0.5, x13, y13;\nfloat y23 = c2.y - c3.y, x32 = c3.x - c2.x, x13, y13;\nfloat x03 = p.x - c3.x, y03 = p.y - c3.y;\nif(f.x + f.y < 1.0) {\n  c1 = l;\n  x13 = -0.5;\n  y13 = -sqrt(3.0 / 4.0);\n}\nelse {\n  c1 = l + vec2(1.5, sqrt(3.0 / 4.0));\n  x13 = 1.0;\n  y13 = 0.0;\n}\nx13 = c1.x - c3.x;\ny13 = c1.y - c3.y;\nvec3 r = vec3(dot(randGrad(c1, s), p - c1), dot(randGrad(c2, s), p - c2), dot(randGrad(c3, s), p - c3));\n//r = vec3(0.0, 0.0, 1.0);\n//vec3 d = vec3(length(op - oc1), length(op - oc2), length(op - oc3));\n//vec3 w = 1.0 / d;\nvec3 w = vec3((y23 * x03 + x32 * y03) / (y23 * x13 + x32 * y13), (-y13 * x03 + x13 * y03) / (y23 * x13 + x32 * y13), 0.0);\nw.z = 1.0 - w.x - w.y;\nvec3 w3 = w * w * (3.0 - 2.0 * w);\nvec3 w5 = w * w * w * (6.0 * w * w - 15.0 * w + 10.0);\nvec3 rv = r * w5;\nreturn (rv.x + rv.y + rv.z) / (w5.x + w5.y + w5.z) * 0.5 + 0.5;");var r=function(){var a=new c("grayscale");return a.source='vec4(vec3(${S("value", "null")}), ${P("alpha")})',a.addParameter("v","alpha",{type:"float",nullValue:1}),a};return{standardVertexShader:d,randScalarFunction:e,randScalarSeededFunction:f,randVectorFunction:g,randVectorSeededFunction:h,randGradFunction:i,randGradSeededFunction:j,mix3Function:k,mix5Function:l,perlinNoiseFunction:m,perlinGradientNoiseFunction:n,simplexNoiseFunction:o,simplexGradientNoiseFunction:p,simplexGradientNoiseSeededFunction:q,grayscaleSnippet:r}}]);